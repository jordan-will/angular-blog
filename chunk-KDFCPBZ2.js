import{a as C}from"./chunk-6KHY3KLJ.js";import{a as B}from"./chunk-QOEKTPHT.js";import{a as F}from"./chunk-44IC75YN.js";import{b as S,d as m,e as _,f as b,i as I,j as E,k as w,l as N,n as U}from"./chunk-LDELUNJN.js";import{$ as r,K as i,N as f,Oa as v,Ra as h,Sa as y,Z as o,_ as a,aa as s,fa as u,ma as p,na as g,y as l}from"./chunk-SAK6RFBY.js";import"./chunk-DAQOROHW.js";var P=class c{router=l(v);useService=l(y);notificationService=l(F);formBuilder=l(N);storage=l(h);url="";form;formIcon="visibility";typeInput="password";disabledButton=!1;ngOnInit(){this.form=this.formBuilder.group({name:["",[m.required,m.minLength(3)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]]})}toggleIcon(){this.formIcon=this.formIcon==="visibility"?"visibility_off":"visibility",this.typeInput=this.typeInput==="text"?"password":"text"}get name(){return this.form.get("name")}get email(){return this.form.get("email")}get password(){return this.form.get("password")}createUser(){if(this.form.invalid){this.notificationService.toast("Fill out the form correctly");return}this.disabledButton=!0;try{let t={id:Date.now().toString(),name:this.name?.value,email:this.email?.value,profileImage:this.url,password:this.password?.value},n=this.storage.get("users/")||[];n.push(t),this.useService.setUser(t),this.useService.setSession(t),this.storage.save("users/",n),this.disabledButton=!1,this.notificationService.toast("Account created successfully"),this.router.navigate(["/home"])}catch(t){console.log("Error saving user:",t),this.disabledButton=!1,this.notificationService.toast("Error on create user. Try again.")}}updateAvatar(t){this.url=t}static \u0275fac=function(n){return new(n||c)};static \u0275cmp=f({type:c,selectors:[["app-sign-up-page"]],decls:22,vars:8,consts:[[1,"form"],[1,"form__template",3,"ngSubmit","formGroup"],[3,"selectedImageEmitter","url"],[1,"form__group"],["type","text","formControlName","name","placeholder","Your name"],[1,"form__error",3,"control"],["type","email","formControlName","email","placeholder","email@example.com"],["formControlName","password","placeholder","At least 6 characters",3,"type"],[1,"material-icons","form__icon",3,"click"],["type","submit",1,"form__button","btn","btn--primary",3,"disabled"]],template:function(n,e){n&1&&(a(0,"div",0)(1,"form",1),u("ngSubmit",function(){return e.createUser()}),a(2,"app-avatar",2),u("selectedImageEmitter",function(A){return e.updateAvatar(A)}),r(),a(3,"div",3)(4,"label"),p(5,"Name"),r(),s(6,"input",4),r(),s(7,"app-form-error",5),a(8,"div",3)(9,"label"),p(10,"Email"),r(),s(11,"input",6),r(),s(12,"app-form-error",5),a(13,"div",3)(14,"label"),p(15,"Password"),r(),s(16,"input",7),a(17,"span",8),u("click",function(){return e.toggleIcon()}),p(18),r()(),s(19,"app-form-error",5),a(20,"button",9),p(21,"Create account"),r()()()),n&2&&(i(),o("formGroup",e.form),i(),o("url",e.url),i(5),o("control",e.name),i(5),o("control",e.email),i(4),o("type",e.typeInput),i(2),g(e.formIcon),i(),o("control",e.password),i(),o("disabled",!e.form.valid||e.disabledButton))},dependencies:[C,B,U,I,S,_,b,E,w],encapsulation:2})};export{P as SignUpPage};
