import{a as P}from"./chunk-QOEKTPHT.js";import{a as C}from"./chunk-44IC75YN.js";import{b as y,d as p,e as I,f as U,i as w,j as E,k as N,l as k,n as B}from"./chunk-LDELUNJN.js";import{$ as i,K as n,N as v,Oa as _,Ra as b,Sa as h,Z as l,_ as t,aa as m,fa as u,ma as r,na as S,y as s}from"./chunk-SAK6RFBY.js";import"./chunk-DAQOROHW.js";var F=class d{router=s(_);localStorage=s(b);userService=s(h);notificationService=s(C);formBuilder=s(k);form;formIcon="visibility";typeInput="password";disabledButton=!1;ngOnInit(){this.form=this.formBuilder.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}get email(){return this.form.get("email")}get password(){return this.form.get("password")}toggleIcon(){this.formIcon=this.formIcon==="visibility"?"visibility_off":"visibility",this.typeInput=this.typeInput==="text"?"password":"text"}login(){this.disabledButton=!0;let o=this.getUser(this.email?.value,this.password?.value);if(!o){this.notificationService.toast("Invalid email or password"),this.disabledButton=!1;return}this.userService.setUser(o),this.userService.setSession(o),this.disabledButton=!1,this.form.reset(),this.notificationService.toast(`Logged as ${o.email}`),this.router.navigate(["/home"])}getUser(o,a){let e=this.localStorage.get("users/")||[],f=[...this.userService.fakeUsers,...e].find(g=>g.email===o&&g.password===a);return f===-1?null:f}static \u0275fac=function(a){return new(a||d)};static \u0275cmp=v({type:d,selectors:[["app-sign-in-page"]],decls:29,vars:6,consts:[[1,"form"],[1,"form__template",3,"ngSubmit","formGroup"],[1,"material-icons","form__logo"],[1,"form__title"],[1,"form__group"],["type","email","formControlName","email","placeholder","email@example.com"],[1,"form__error",3,"control"],["formControlName","password","placeholder","Your password",3,"type"],[1,"material-icons","form__icon",3,"click"],["type","submit",1,"form__button","btn","btn--primary",3,"disabled"],["type","button",1,"form__button","btn","btn--secondary","btn--create-account",3,"click"],[1,"form__default"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"form",1),u("ngSubmit",function(){return e.login()}),t(2,"span",2),r(3," chat "),i(),t(4,"h1",3),r(5,"Angular Blogger"),i(),t(6,"div",4)(7,"label"),r(8,"Email"),i(),m(9,"input",5),i(),m(10,"app-form-error",6),t(11,"div",4)(12,"label"),r(13,"Password"),i(),m(14,"input",7),t(15,"span",8),u("click",function(){return e.toggleIcon()}),r(16),i()(),m(17,"app-form-error",6),t(18,"button",9),r(19," Login"),i(),t(20,"button",10),u("click",function(){return e.router.navigate(["/sign-up"])}),r(21,"Create Account"),i(),t(22,"div",11)(23,"span"),r(24,"You can use:"),i(),t(25,"span"),r(26,"Email: jonhdoe@email.com"),i(),t(27,"span"),r(28,"Password: 123456"),i()()()()),a&2&&(n(),l("formGroup",e.form),n(9),l("control",e.email),n(4),l("type",e.typeInput),n(2),S(e.formIcon),n(),l("control",e.password),n(),l("disabled",!e.form.valid||e.disabledButton))},dependencies:[B,w,y,I,U,E,N,P],encapsulation:2})};export{F as SignInPage};
