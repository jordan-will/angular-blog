import{a as E}from"./chunk-2WLS6SHU.js";import{a as D}from"./chunk-AT3UWOFJ.js";import{$ as n,A as u,B as g,E as a,Ga as M,Ha as w,K as c,N as _,Oa as P,Sa as k,U as h,V as f,W as S,X as v,Y as y,Z as p,_ as s,aa as C,ea as L,fa as x,ga as m,ma as l,na as b,ua as d,y as r}from"./chunk-SAK6RFBY.js";import"./chunk-DAQOROHW.js";var F=e=>({"padding-top":e}),O=e=>({"background-image":e});function U(e,t){if(e&1){let i=L();s(0,"div",2),x("click",function(){let N=u(i).$implicit,T=m(2);return g(T.callEdit(N.id))}),C(1,"div",3),s(2,"span",4),l(3),n(),s(4,"span",5),l(5,"keyboard_arrow_right"),n()()}if(e&2){let i=t.$implicit;c(),p("ngStyle",d(2,O,"url("+i.cover+")")),c(2),b(i.title)}}function V(e,t){if(e&1&&v(0,U,6,4,"div",1,S),e&2){let i=m();y(i.postList())}}function $(e,t){e&1&&(s(0,"span"),l(1,"You don't have any post yet. Create your first post"),n())}var I=class e{router=r(P);userService=r(k);postService=r(D);searchService=r(E);postList=a([]);postListCtrl=a([]);userLogged;hasSearch=a(!1);ngOnInit(){this.userLogged=this.userService.getUserOnSession(),this.postService.getPostByAuthor(this.userLogged.id).subscribe(t=>{console.log("posts ",t),this.postList.set(t),this.postListCtrl.set(t)}),this.searchService.search$.subscribe(t=>{if(t){let i=this.postListCtrl().filter(o=>o.title.toLowerCase().includes(t.toLowerCase()));console.log("filtered posts ",i),this.postList.set(i),this.hasSearch.set(!0)}else this.postList.set(this.postListCtrl()),this.hasSearch.set(!1)})}callEdit(t){this.router.navigate(["/editor",t,this.userLogged.id])}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=_({type:e,selectors:[["app-my-stories"]],decls:3,vars:4,consts:[[1,"stories",3,"ngStyle"],[1,"stories__item"],[1,"stories__item",3,"click"],[1,"stories__thumbnail",3,"ngStyle"],[1,"stories__title"],[1,"material-icons"]],template:function(i,o){i&1&&(s(0,"div",0),h(1,V,2,0)(2,$,2,0,"span"),n()),i&2&&(p("ngStyle",d(2,F,o.hasSearch()?"82px":"1rem")),c(),f(o.postList().length!==0?1:2))},dependencies:[w,M],encapsulation:2})};export{I as MyStories};
